<style>
  .movie-card {
    background: #1c1c1c;
    border: 1px solid #2a2a2a;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.45);
    padding: 1.5rem;
    margin-bottom: 2rem;
  }

  .movie-meta span {
    margin-right: .5rem;
  }

  .movie-description {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
  }

  .info-item {
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    padding: .75rem 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .info-item strong {
    font-weight: 600;
  }

  .actor-badge {
    background: #2a2a2a;
    border: 1px solid rgba(255, 255, 255, 0.08);
    font-size: .95rem;
    padding: .4rem .75rem;
    border-radius: 20px;
  }

  .availability-card {
    background: #1c1c1c;
    border: 1px solid #2a2a2a;
    border-radius: 8px;
    padding: .75rem 1rem;
    margin-bottom: .5rem;
  }
</style>

<div class="container py-5">
  <div class="row gx-5">

    <!-- Movie Cover -->
    <div class="col-12 col-lg-3 mb-4 mb-lg-0">
      <div class="movie-card p-0 overflow-hidden">
        {{#if movie.coverUrl}}
        <img src="{{movie.coverUrl}}" alt="{{movie.title}} cover image" class="w-100 rounded"
          style="object-fit: cover; aspect-ratio: 2/3; filter: brightness(0.95);" loading="lazy">
        {{else}}
        <div class="d-flex align-items-center justify-content-center bg-secondary rounded" style="aspect-ratio: 2/3;">
          <span class="text-muted">No Cover</span>
        </div>
        {{/if}}
      </div>
    </div>

    <!-- Movie Details -->
    <div class="col-12 col-lg-9 d-flex flex-column">

      <!-- Title & Meta -->
      <div class="movie-card">
        <div class="d-flex flex-wrap justify-content-between align-items-start mb-3">
          <div>
            <h1 class="fw-bold text-light mb-1">{{movie.title}}</h1>
            <div class="movie-meta">
              {{#if movie.releaseYear}}<span class="badge bg-secondary">{{movie.releaseYear}}</span>{{/if}}
              {{#if movie.category}}<span class="badge bg-info text-dark">{{movie.category}}</span>{{/if}}
              {{#if movie.rating}}<span class="badge bg-warning text-dark">{{movie.rating}}</span>{{/if}}
              {{#if movie.length}}<span class="badge bg-primary"><i class="bi bi-clock me-1"></i>{{movie.length}}
                min</span>{{/if}}
            </div>
          </div>

          {{#if (eq user.role 'STAFF')}}
          <div class="d-flex flex-column gap-2 d-none d-lg-block">
            <a href="/movies/{{movie.filmId}}/edit" class="btn btn-warning btn-sm">
              <i class="bi bi-pencil-square me-1"></i>Edit
            </a>
            <a href="/movies/{{movie.filmId}}/rent" class="btn btn-info btn-sm">
              <i class="bi bi-cart-plus me-1"></i>Rent
            </a>
          </div>
          {{/if}}
        </div>

        {{#if movie.description}}
        <p class="movie-description">{{movie.description}}</p>
        {{/if}}
      </div>

      <!-- Info -->
      <div class="movie-card">
        {{#if movie.language}}
        <div class="info-item"><span><i class="bi bi-translate me-2 text-info"></i><strong>Language:</strong></span>
          <span>{{movie.language}}</span>
        </div>
        {{/if}}
        {{#if movie.rentalDuration}}
        <div class="info-item"><span><i class="bi bi-calendar2-week me-2 text-info"></i><strong>Rental
              Duration:</strong></span> <span>{{movie.rentalDuration}} days</span></div>
        {{/if}}
        {{#if movie.rentalRate}}
        <div class="info-item"><span><i class="bi bi-currency-euro me-2 text-info"></i><strong>Rental
              Rate:</strong></span> <span>€{{movie.rentalRate}}</span></div>
        {{/if}}
        {{#if movie.replacementCost}}
        <div class="info-item"><span><i class="bi bi-cash-stack me-2 text-info"></i><strong>Replacement
              Cost:</strong></span> <span>€{{movie.replacementCost}}</span></div>
        {{/if}}
        {{#if movie.specialFeatures}}
        <div class="info-item"><span><i class="bi bi-stars me-2 text-info"></i><strong>Special Features:</strong></span>
          <span>{{movie.specialFeatures}}</span>
        </div>
        {{/if}}
      </div>

      <!-- Actors -->
      {{#if movie.actors}}
      <div class="movie-card">
        <h5 class="text-light mb-3"><i class="bi bi-people-fill me-2 text-info"></i>Actors</h5>
        <div class="d-flex flex-wrap gap-2">
          {{#each movie.actors}}
          <span class="actor-badge">{{this.firstName}} {{this.lastName}}</span>
          {{/each}}
        </div>
      </div>
      {{/if}}

      <!-- Availability -->
      <div class="movie-card">
        <h5 class="text-light mb-3"><i class="bi bi-shop me-2 text-info"></i>Availability</h5>
        {{#if movie.availability}}
        {{#each movie.availability}}
        <div class="availability-card d-flex justify-content-between align-items-center">
          <span>{{this.storeName}}</span>
          <span class="badge bg-success">{{this.copies}} copies</span>
        </div>
        {{/each}}
        {{else}}
        <div class="alert alert-danger mb-0">
          <i class="bi bi-x-circle-fill me-2"></i>Not available in any of our stores!
        </div>
        {{/if}}
      </div>
    </div>
  </div>

  <!-- Mobile FAB -->
  {{#if (eq user.role 'STAFF')}}
  <a href="/movies/{{movie.filmId}}/edit" class="btn btn-warning btn-lg rounded-circle shadow d-lg-none position-fixed"
    style="right:16px; bottom:16px; z-index:1050;" aria-label="Edit movie">
    <i class="bi bi-pencil-square"></i>
  </a>
  {{/if}}
</div>